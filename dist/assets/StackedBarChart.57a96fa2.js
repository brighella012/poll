var O=Object.defineProperty,V=Object.defineProperties;var W=Object.getOwnPropertyDescriptors;var z=Object.getOwnPropertySymbols;var X=Object.prototype.hasOwnProperty,J=Object.prototype.propertyIsEnumerable;var B=(a,t,e)=>t in a?O(a,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[t]=e,T=(a,t)=>{for(var e in t||(t={}))X.call(t,e)&&B(a,e,t[e]);if(z)for(var e of z(t))J.call(t,e)&&B(a,e,t[e]);return a},D=(a,t)=>V(a,W(t));import{n as y,s as U,S as K,i as Q,a as Y,b as q,f as L,e as x,t as M,c as F,d as S,h as l,j,k as Z,x as $,u as tt,y as N,v as et}from"./index.25adb146.js";import{C as P,L as at,c as st,a as rt,B as it,p as ot,d as nt,b as lt}from"./chartjs-plugin-datalabels.esm.a4ccba6c.js";const _=[];function ct(a,t=y){let e;const r=new Set;function h(i){if(U(a,i)&&(a=i,e)){const c=!_.length;for(const o of r)o[1](),_.push(o,a);if(c){for(let o=0;o<_.length;o+=2)_[o][0](_[o+1]);_.length=0}}}function n(i){h(i(a))}function d(i,c=y){const o=[i,c];return r.add(o),r.size===1&&(e=t(h)||y),i(a),()=>{r.delete(o),r.size===0&&(e(),e=null)}}return{set:h,update:n,subscribe:d}}const H=ct([]);function dt(a){let t,e,r,h,n,d,i,c,o=Math.round(a[1]/2)+"",b,w,v,E,f;return{c(){t=x("div"),e=x("h4"),r=M(a[0]),h=F(),n=x("div"),d=x("div"),i=x("div"),c=M("Maggioranza: "),b=M(o),w=M(" seggi su "),v=M(a[1]),E=F(),f=x("canvas"),this.c=y,S(i,"class","majorty__tooltip"),S(d,"class","majorty"),S(f,"id","myChart"),S(f,"width","100%"),S(f,"height","100%"),S(n,"class","chart"),S(t,"class","card")},m(u,p){q(u,t,p),l(t,e),l(e,r),l(t,h),l(t,n),l(n,d),l(d,i),l(i,c),l(i,b),l(i,w),l(i,v),l(n,E),l(n,f),a[5](f)},p(u,[p]){p&1&&j(r,u[0]),p&2&&o!==(o=Math.round(u[1]/2)+"")&&j(b,o),p&2&&j(v,u[1])},i:y,o:y,d(u){u&&Z(t),a[5](null)}}}function ht(a,t,e){let r;$(a,H,s=>e(6,r=s)),P.register(at,st,rt,it,ot,nt,lt);let{title:h}=t,{totalSeats:n}=t,{data:d}=t,{hasMasterLegend:i=!1}=t,c,o=new Map;const b=new Map;b.set(0,["Liberi e Uguali","Movimento 5","Partito Democratico","Centro Sinistra"]),b.set(1,["Movimento 5","Lega"]),b.set(2,["Movimento 5","Centro Destra","Forza Italia","Lega"]);function w(s,g,k){const C=g.datasetIndex;k.chart.isDatasetVisible(C)?(r.forEach(m=>m.hide(C)),g.hidden=!0):(r.forEach(m=>m.show(C)),g.hidden=!1)}const f={indexAxis:"y",responsive:!0,maintainAspectRatio:!1,plugins:{tooltip:{enabled:!0,displayColors:!1},datalabels:{display:!0,color:"white",font:{weight:"bold"},textShadowBlur:6,textShadowColor:"black"},legend:{display:i,position:"bottom",onClick:w}},scales:{y:{stacked:!0,grid:{display:!1}},x:{stacked:!0,grid:{display:!1},max:n}}},u=s=>{const g=s.reduce((m,{amount:R})=>m+=R,0),k=n-g,C={borderColor:"white",borderWidth:3},A=s.map(({amount:m,color:R,label:I})=>D(T({},C),{label:I,data:[m],backgroundColor:[R]}));return k>=1&&A.push(D(T({},C),{label:"Non assegnati",backgroundColor:["#EFEFEF"],data:[k]})),A},p=()=>{const s=new P(c,{type:"bar",data:{labels:[""],datasets:u(d)},options:f});return s.getSortedVisibleDatasetMetas().forEach(g=>{o.set(g.label,g.index)}),s};tt(()=>{let s=p();return N(H,r=[...r,s],r),()=>{r.length>=2&&N(H,r=[],r),s.destroy()}});function G(s){et[s?"unshift":"push"](()=>{c=s,e(2,c)})}return a.$$set=s=>{"title"in s&&e(0,h=s.title),"totalSeats"in s&&e(1,n=s.totalSeats),"data"in s&&e(3,d=s.data),"hasMasterLegend"in s&&e(4,i=s.hasMasterLegend)},[h,n,c,d,i,G]}class ut extends K{constructor(t){super(),this.shadowRoot.innerHTML="<style>.card{width:100%;display:flex;height:230px;flex-direction:column;gap:var(--space-xs)}.chart{position:relative;height:100%;border-radius:7px;padding:var(--space-2xs) 0}.majorty{position:absolute;height:70%;width:2px;border-radius:4px;background-color:var(--color-gray-300);border:2px solid white;left:50%;top:30%;transform:translate(-50%, -50%)}.majorty__tooltip{position:absolute;left:50%;top:0;border:1px solid var(--color-gray-200);padding:var(--space-3xs);font-size:var(--text-h5);border-radius:7px;transform:translateX(-50%);background-color:var(--color-white);width:max-content}</style>",Q(this,{target:this.shadowRoot,props:Y(this.attributes),customElement:!0},ht,dt,U,{title:0,totalSeats:1,data:3,hasMasterLegend:4},null),t&&(t.target&&q(t.target,this,t.anchor),t.props&&(this.$set(t.props),L()))}static get observedAttributes(){return["title","totalSeats","data","hasMasterLegend"]}get title(){return this.$$.ctx[0]}set title(t){this.$$set({title:t}),L()}get totalSeats(){return this.$$.ctx[1]}set totalSeats(t){this.$$set({totalSeats:t}),L()}get data(){return this.$$.ctx[3]}set data(t){this.$$set({data:t}),L()}get hasMasterLegend(){return this.$$.ctx[4]}set hasMasterLegend(t){this.$$set({hasMasterLegend:t}),L()}}customElements.define("stacked-bar",ut);
